// Copyright 2018 (c) Cillié Malan
// See LICENSE for more info

var lookup = 'ͷχіȼрдоπӧѷυүҍϛϕтђԏϊѯкոҥͼɲύɍцқϖƥԣӂϗзmǣέȝpҟյσϯւƴѓgbßƚаԁաӱɫλqηӫԅɛұϸǰϙեǝnӳճրҗғօɠǯϐοͽyτխόԥκcȣāψћѕdƒƣƨӈҙվҧїφwղӝɱմώӯҁӭhԧիȧӟҳɀƿɂήӌɖԍςɗθҩҽӽӻѱժԭӄӛӓɩռбѫƶӕǆʌթәզџɣαѭδsƙөҕјտӏʇсҭҵяԓуϝьңҋǉգфϻўjϭɓѡɥάӵɵԃыհԩϋքξγբҷfɇϣмvԫսӑвʋȿɪƞԗƕկҹҫǫӥҝɽѵиќըѝէρѳʝշնɜɉжҏҿɯֆΰњӎхձևʃѣԕӣɔµǌçԡӡюԯəϱζӊ';
var reverse = {
    'ͷ': 0,
    'χ': 1,
    'і': 2,
    'ȼ': 3,
    'р': 4,
    'д': 5,
    'о': 6,
    'π': 7,
    'ӧ': 8,
    'ѷ': 9,
    'υ': 10,
    'ү': 11,
    'ҍ': 12,
    'ϛ': 13,
    'ϕ': 14,
    'т': 15,
    'ђ': 16,
    'ԏ': 17,
    'ϊ': 18,
    'ѯ': 19,
    'к': 20,
    'ո': 21,
    'ҥ': 22,
    'ͼ': 23,
    'ɲ': 24,
    'ύ': 25,
    'ɍ': 26,
    'ц': 27,
    'қ': 28,
    'ϖ': 29,
    'ƥ': 30,
    'ԣ': 31,
    'ӂ': 32,
    'ϗ': 33,
    'з': 34,
    'm': 35,
    'ǣ': 36,
    'έ': 37,
    'ȝ': 38,
    'p': 39,
    'ҟ': 40,
    'յ': 41,
    'σ': 42,
    'ϯ': 43,
    'ւ': 44,
    'ƴ': 45,
    'ѓ': 46,
    'g': 47,
    'b': 48,
    'ß': 49,
    'ƚ': 50,
    'а': 51,
    'ԁ': 52,
    'ա': 53,
    'ӱ': 54,
    'ɫ': 55,
    'λ': 56,
    'q': 57,
    'η': 58,
    'ӫ': 59,
    'ԅ': 60,
    'ɛ': 61,
    'ұ': 62,
    'ϸ': 63,
    'ǰ': 64,
    'ϙ': 65,
    'ե': 66,
    'ǝ': 67,
    'n': 68,
    'ӳ': 69,
    'ճ': 70,
    'ր': 71,
    'җ': 72,
    'ғ': 73,
    'օ': 74,
    'ɠ': 75,
    'ǯ': 76,
    'ϐ': 77,
    'ο': 78,
    'ͽ': 79,
    'y': 80,
    'τ': 81,
    'խ': 82,
    'ό': 83,
    'ԥ': 84,
    'κ': 85,
    'c': 86,
    'ȣ': 87,
    'ā': 88,
    'ψ': 89,
    'ћ': 90,
    'ѕ': 91,
    'd': 92,
    'ƒ': 93,
    'ƣ': 94,
    'ƨ': 95,
    'ӈ': 96,
    'ҙ': 97,
    'վ': 98,
    'ҧ': 99,
    'ї': 100,
    'φ': 101,
    'w': 102,
    'ղ': 103,
    'ӝ': 104,
    'ɱ': 105,
    'մ': 106,
    'ώ': 107,
    'ӯ': 108,
    'ҁ': 109,
    'ӭ': 110,
    'h': 111,
    'ԧ': 112,
    'ի': 113,
    'ȧ': 114,
    'ӟ': 115,
    'ҳ': 116,
    'ɀ': 117,
    'ƿ': 118,
    'ɂ': 119,
    'ή': 120,
    'ӌ': 121,
    'ɖ': 122,
    'ԍ': 123,
    'ς': 124,
    'ɗ': 125,
    'θ': 126,
    'ҩ': 127,
    'ҽ': 128,
    'ӽ': 129,
    'ӻ': 130,
    'ѱ': 131,
    'ժ': 132,
    'ԭ': 133,
    'ӄ': 134,
    'ӛ': 135,
    'ӓ': 136,
    'ɩ': 137,
    'ռ': 138,
    'б': 139,
    'ѫ': 140,
    'ƶ': 141,
    'ӕ': 142,
    'ǆ': 143,
    'ʌ': 144,
    'թ': 145,
    'ә': 146,
    'զ': 147,
    'џ': 148,
    'ɣ': 149,
    'α': 150,
    'ѭ': 151,
    'δ': 152,
    's': 153,
    'ƙ': 154,
    'ө': 155,
    'ҕ': 156,
    'ј': 157,
    'տ': 158,
    'ӏ': 159,
    'ʇ': 160,
    'с': 161,
    'ҭ': 162,
    'ҵ': 163,
    'я': 164,
    'ԓ': 165,
    'у': 166,
    'ϝ': 167,
    'ь': 168,
    'ң': 169,
    'ҋ': 170,
    'ǉ': 171,
    'գ': 172,
    'ф': 173,
    'ϻ': 174,
    'ў': 175,
    'j': 176,
    'ϭ': 177,
    'ɓ': 178,
    'ѡ': 179,
    'ɥ': 180,
    'ά': 181,
    'ӵ': 182,
    'ɵ': 183,
    'ԃ': 184,
    'ы': 185,
    'հ': 186,
    'ԩ': 187,
    'ϋ': 188,
    'ք': 189,
    'ξ': 190,
    'γ': 191,
    'բ': 192,
    'ҷ': 193,
    'f': 194,
    'ɇ': 195,
    'ϣ': 196,
    'м': 197,
    'v': 198,
    'ԫ': 199,
    'ս': 200,
    'ӑ': 201,
    'в': 202,
    'ʋ': 203,
    'ȿ': 204,
    'ɪ': 205,
    'ƞ': 206,
    'ԗ': 207,
    'ƕ': 208,
    'կ': 209,
    'ҹ': 210,
    'ҫ': 211,
    'ǫ': 212,
    'ӥ': 213,
    'ҝ': 214,
    'ɽ': 215,
    'ѵ': 216,
    'и': 217,
    'ќ': 218,
    'ը': 219,
    'ѝ': 220,
    'է': 221,
    'ρ': 222,
    'ѳ': 223,
    'ʝ': 224,
    'շ': 225,
    'ն': 226,
    'ɜ': 227,
    'ɉ': 228,
    'ж': 229,
    'ҏ': 230,
    'ҿ': 231,
    'ɯ': 232,
    'ֆ': 233,
    'ΰ': 234,
    'њ': 235,
    'ӎ': 236,
    'х': 237,
    'ձ': 238,
    'և': 239,
    'ʃ': 240,
    'ѣ': 241,
    'ԕ': 242,
    'ӣ': 243,
    'ɔ': 244,
    'µ': 245,
    'ǌ': 246,
    'ç': 247,
    'ԡ': 248,
    'ӡ': 249,
    'ю': 250,
    'ԯ': 251,
    'ə': 252,
    'ϱ': 253,
    'ζ': 254,
    'ӊ': 255
  }

function encode(input) {
    var output = '';

    if (input === '' || input === undefined || input === null) {
        return input;
    }

    for (var i = 0; i < input.length; i++) {
        var v = input[i];
        if (!isFinite(v) || isNaN(v) || v < 0 || v > 255) {
            throw 'invalid input';
        }
        output += lookup[v];
    }

    return output;
}

function decode(input) {
    var output = Array(input.length);

    for (var i = 0; i < input.length; i++) {
        var d = reverse[input[i]];
        if (typeof d != 'number') {
            throw 'invalid input';
        }

        output[i] = d;
    }

    return output;
}

if (typeof require == 'function') {
    module.exports = {
        encode: encode,
        decode: decode
    };
} else {
    this.crazy = {
        encode: encode,
        decode: decode
    }
}
